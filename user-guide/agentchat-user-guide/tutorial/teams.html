<!DOCTYPE html>

<html :class="{'dark': darkMode === 'dark' || (darkMode === 'system' &amp;&amp; window.matchMedia('(prefers-color-scheme: dark)').matches)}" class="scroll-smooth" data-content_root="../../../" lang="en" x-data="{ darkMode: localStorage.getItem('darkMode') || localStorage.setItem('darkMode', 'system'), activeSection: '' }" x-init="$watch('darkMode', val =&gt; localStorage.setItem('darkMode', val))">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="white" media="(prefers-color-scheme: light)" name="theme-color"/>
<meta content="black" media="(prefers-color-scheme: dark)" name="theme-color"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Teams | AutoGen</title>
<meta content="Teams | AutoGen" property="og:title"/>
<meta content="Teams | AutoGen" name="twitter:title"/>
<link href="../../../_static/pygments.css?v=3d3fbe02" rel="stylesheet" type="text/css"/>
<link href="../../../_static/theme.css?v=42baaae4" rel="stylesheet" type="text/css"/>
<link href="../../../_static/graphviz.css?v=4ae1632d" rel="stylesheet" type="text/css"/>
<link href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/sphinx-design.min.css?v=95c83b7e" rel="stylesheet" type="text/css"/>
<link href="../../../_static/custom.css?v=ebe0eec8" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/awesome-sphinx-design.css?v=15e0fffa" rel="stylesheet" type="text/css"/>
<link href="/autogen/dev/user-guide/agentchat-user-guide/tutorial/teams.html" rel="canonical"/>
<link href="../../../_static/favicon-512x512.png" rel="icon"/>
<link href="../../../search.html" rel="search" title="Search"/>
<link href="../../../genindex.html" rel="index" title="Index"/>
<link href="selector-group-chat.html" rel="next" title="Selector Group Chat"/>
<link href="agents.html" rel="prev" title="Agents"/>
<script>
    <!-- Prevent Flash of wrong theme -->
      const userPreference = localStorage.getItem('darkMode');
      let mode;
      if (userPreference === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches) {
        mode = 'dark';
        document.documentElement.classList.add('dark');
      } else {
        mode = 'light';
      }
      if (!userPreference) {localStorage.setItem('darkMode', mode)}
     
      function closeAnnouncement() {
          var announcementBar = document.getElementById('announcementBar');
          if (announcementBar) {
              announcementBar.style.animation = 'fadeOut 0.5s ease forwards';
              setTimeout(() => {
                  announcementBar.remove();
              }, 500);
          }
      }
    </script>
</head>
<body :class="{ 'overflow-hidden': showSidebar }" class="min-h-screen font-sans antialiased bg-background text-foreground" x-data="{ showSidebar: false, showScrollTop: false }">
<div @click.self="showSidebar = false" class="fixed inset-0 z-50 overflow-hidden bg-background/80 backdrop-blur-sm md:hidden" x-cloak="" x-show="showSidebar"></div><div class="relative flex flex-col min-h-screen" id="page">
<div class="announcementbar" id="announcementBar">
<div class="announcementbar-content">
<div class="announcementbar-message"><span class="fa-solid fa-triangle-exclamation"></span> AutoGen v0.4 is a work in progress. Go <a href="https://microsoft.github.io/autogen/0.2/">here</a> to continue using v0.2 documentation.</div>
<button class="announcement-close-button" onclick="closeAnnouncement()">
<i class="fas fa-times"></i>
</button>
</div>
</div>
<a class="absolute top-0 left-0 z-[100] block bg-background p-4 text-xl transition -translate-x-full opacity-0 focus:translate-x-0 focus:opacity-100" href="#content">
      Skip to content
    </a><header class="sticky top-0 z-40 w-full border-b shadow-sm border-border supports-backdrop-blur:bg-background/60 bg-background/95 backdrop-blur"><div class="container flex items-center h-14">
<div class="hidden mr-4 md:flex">
<a class="flex items-center mr-6" href="../../../index.html">
<img alt="Logo" class="mr-2 dark:invert" height="24" src="../../../_static/logo.svg" width="24"/><span class="hidden font-bold sm:inline-block text-clip whitespace-nowrap">AutoGen</span>
</a><nav class="flex items-center space-x-6 text-sm font-medium">
<a class="transition-colors hover:text-foreground/80 text-foreground/60" href="/index.html">Docs</a>
</nav></div><button @click="showSidebar = true" class="inline-flex items-center justify-center h-10 px-0 py-2 mr-2 text-base font-medium transition-colors rounded-md hover:text-accent-foreground hover:bg-transparent md:hidden" type="button">
<svg aria-hidden="true" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M152.587 825.087q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440Zm0-203.587q-19.152 0-32.326-13.174T107.087 576q0-19.152 13.174-32.326t32.326-13.174h320q19.152 0 32.326 13.174T518.087 576q0 19.152-13.174 32.326T472.587 621.5h-320Zm0-203.587q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440ZM708.913 576l112.174 112.174q12.674 12.674 12.674 31.826t-12.674 31.826Q808.413 764.5 789.261 764.5t-31.826-12.674l-144-144Q600 594.391 600 576t13.435-31.826l144-144q12.674-12.674 31.826-12.674t31.826 12.674q12.674 12.674 12.674 31.826t-12.674 31.826L708.913 576Z"></path>
</svg>
<span class="sr-only">Toggle navigation menu</span>
</button>
<div class="flex items-center justify-between flex-1 space-x-2 sm:space-x-4 md:justify-end">
<div class="flex-1 w-full md:w-auto md:flex-none"><form @keydown.k.window.meta="$refs.search.focus()" action="../../../search.html" class="relative flex items-center group" id="searchbox" method="get">
<input aria-label="Search the docs" class="inline-flex items-center font-medium transition-colors bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background border border-input hover:bg-accent focus:bg-accent hover:text-accent-foreground focus:text-accent-foreground hover:placeholder-accent-foreground py-2 px-4 relative h-9 w-full justify-start rounded-[0.5rem] text-sm text-muted-foreground sm:pr-12 md:w-40 lg:w-64" id="search-input" name="q" placeholder="Search ..." type="search" x-ref="search"/>
<kbd class="pointer-events-none absolute right-1.5 top-2 hidden h-5 select-none text-muted-foreground items-center gap-1 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex group-hover:bg-accent group-hover:text-accent-foreground">
<span class="text-xs">⌘</span>
    K
  </kbd>
</form>
</div>
<nav class="flex items-center space-x-1">
<a href="https://twitter.com/pyautogen" rel="noopener nofollow" title="Visit Twitter">
<div class="inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md disabled:opacity-50 disabled:pointer-events-none hover:bg-accent hover:text-accent-foreground h-9 w-9">
<svg fill="currentColor" height="22px" style="margin-top:-2px;display:inline" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</div>
</a>
<a href="https://github.com/microsoft/agnext" rel="noopener nofollow" title="Visit GitHub">
<div class="inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md disabled:opacity-50 disabled:pointer-events-none hover:bg-accent hover:text-accent-foreground h-9 w-9">
<svg fill="currentColor" height="22px" style="margin-top:-2px;display:inline" viewbox="0 0 45 44" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M22.477.927C10.485.927.76 10.65.76 22.647c0 9.596 6.223 17.736 14.853 20.608 1.087.2 1.483-.47 1.483-1.047 0-.516-.019-1.881-.03-3.693-6.04 1.312-7.315-2.912-7.315-2.912-.988-2.51-2.412-3.178-2.412-3.178-1.972-1.346.149-1.32.149-1.32 2.18.154 3.327 2.24 3.327 2.24 1.937 3.318 5.084 2.36 6.321 1.803.197-1.403.759-2.36 1.379-2.903-4.823-.548-9.894-2.412-9.894-10.734 0-2.37.847-4.31 2.236-5.828-.224-.55-.969-2.759.214-5.748 0 0 1.822-.584 5.972 2.226 1.732-.482 3.59-.722 5.437-.732 1.845.01 3.703.25 5.437.732 4.147-2.81 5.967-2.226 5.967-2.226 1.185 2.99.44 5.198.217 5.748 1.392 1.517 2.232 3.457 2.232 5.828 0 8.344-5.078 10.18-9.916 10.717.779.67 1.474 1.996 1.474 4.021 0 2.904-.027 5.247-.027 5.96 0 .58.392 1.256 1.493 1.044C37.981 40.375 44.2 32.24 44.2 22.647c0-11.996-9.726-21.72-21.722-21.72" fill="currentColor" fill-rule="evenodd"></path></svg>
</div>
</a>
<a href="/packages" rel="noopener nofollow" title="Visit Packages">
<div class="inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md disabled:opacity-50 disabled:pointer-events-none hover:bg-accent hover:text-accent-foreground h-9 w-9">
<svg fill="none" height="20" viewbox="0 0 118 105" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M17.6645 40.4581L34.2565 46.4975L51.0948 40.3685L34.5029 34.329L17.6645 40.4581ZM34.329 26.8229L50.922 32.8623L67.7593 26.7333L51.1674 20.6938L34.329 26.8229Z" fill="#F7F7F4" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M34.329 26.8229L50.922 32.8624V52.3631L34.329 46.3247V26.8229Z" fill="#EFEEEA" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M1 66.2116L17.592 72.2521L34.4303 66.1231L17.8373 60.0836L1 66.2116Z" fill="#F7F7F4" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M1 66.2117L17.592 72.2522V91.753L1 85.7146V66.2117Z" fill="#EFEEEA" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M1 38.4783L17.592 44.5189L34.4303 38.3898L17.8373 32.3503L1 38.4783Z" fill="#F7F7F4" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M17.5919 44.5189V64.0196L34.4303 57.8916V38.3898L17.5919 44.5189Z" fill="white" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M1 38.4783L17.592 44.5189V64.0196L1 57.9812V38.4783Z" fill="#EFEEEA" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M17.6634 72.2725L34.2564 78.3119V97.8137L17.6645 91.7743L17.6634 72.2725Z" fill="#EFEEEA" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M17.6634 52.5775L34.2564 58.617L51.0948 52.4879L34.5028 46.4495L17.6634 52.5775Z" fill="#F7F7F4" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M17.6634 52.5775L34.2564 58.617V78.1188L17.6645 72.0794L17.6634 52.5775Z" fill="#EFEEEA" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M100.917 66.1913V85.6932L117.754 79.5652V60.0634L100.917 66.1913Z" fill="white" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M84.251 72.2521V91.7529L101.089 85.6249V66.123L84.251 72.2521Z" fill="#FFD242" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M98.0377 77.0062C98.0378 77.4582 97.9542 77.9362 97.7917 78.413C97.6292 78.8897 97.391 79.3559 97.0907 79.7848C96.7904 80.2137 96.4338 80.5969 96.0414 80.9127C95.6489 81.2284 95.2283 81.4704 94.8036 81.6249C93.9463 81.9367 93.1241 81.8734 92.5178 81.4489C91.9116 81.0245 91.5708 80.2736 91.5705 79.3614C91.5703 78.9095 91.6539 78.4316 91.8163 77.9549C91.9787 77.4782 92.2168 77.0121 92.517 76.5832C92.8172 76.1543 93.1737 75.771 93.566 75.4552C93.9583 75.1394 94.3789 74.8973 94.8036 74.7428C95.2283 74.5882 95.6488 74.5241 96.0412 74.5542C96.4336 74.5844 96.7901 74.7081 97.0904 74.9184C97.3908 75.1287 97.629 75.4214 97.7915 75.7798C97.9541 76.1382 98.0377 76.5543 98.0377 77.0062Z" fill="white"></path><path d="M67.5865 78.3119V97.8137L84.4249 91.6847V72.1829L67.5865 78.3119Z" fill="#FFD242" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M50.922 84.3717V103.873L67.7593 97.7444V78.2437L50.922 84.3717Z" fill="white" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M34.329 78.3322L50.922 84.3716V103.873L34.329 97.834V78.3322Z" fill="#EFEEEA" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M100.917 46.4975V65.9983L117.754 59.8703V40.3685L100.917 46.4975Z" fill="#FFD242" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M84.3235 20.7632L100.917 26.8026L117.754 20.6736L101.162 14.6341L84.3235 20.7632Z" fill="#FFC91D" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M100.917 26.8026V46.3034L117.754 40.1754V20.6736L100.917 26.8026ZM84.251 52.5572V72.058L101.089 65.93V46.4282L84.251 52.5572Z" fill="#FFD242" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M84.251 32.8624V52.3631L101.089 46.2351V26.7333L84.251 32.8624Z" fill="#3775A9" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M67.6591 7.12799L84.251 13.1674L101.089 7.03839L84.4974 1L67.6591 7.12799Z" fill="#2F6491" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M84.251 13.1664V32.6682L101.089 26.5402V7.03839L84.251 13.1664Z" fill="#3775A9" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M67.5865 58.617V78.1188L84.4249 71.9898V52.4879L67.5865 58.617Z" fill="#FFD242" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M67.5865 38.9221V58.4239L84.4249 52.2948V32.793L67.5865 38.9221ZM50.922 64.6767V84.1785L67.7593 78.0495V58.5487L50.922 64.6767Z" fill="#3775A9" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M34.329 58.6383L50.922 64.6767V84.1786L34.329 78.1391V58.6383ZM34.329 38.9424L50.922 44.9818L67.7593 38.8538L51.1674 32.8144L34.329 38.9424Z" fill="#2F6491" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M50.922 44.9818V64.4836L67.7593 58.3546V38.8538L50.922 44.9818Z" fill="#3775A9" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M34.329 38.9423L50.922 44.9818V64.4836L34.329 58.4442V38.9423ZM50.9946 13.1877L67.5865 19.2272L84.4249 13.0981L67.8319 7.05972L50.9946 13.1877Z" fill="#2F6491" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M67.5865 19.2272V38.729L84.4249 32.5999V13.0981L67.5865 19.2272Z" fill="#3775A9" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M50.9946 13.1877L67.5865 19.2272V38.729L50.9946 32.6895V13.1877Z" fill="#2F6491" stroke="#CCCCCC" stroke-linejoin="bevel" stroke-width="0.378666"></path><path d="M77.1065 25.4906C77.1066 25.9426 77.023 26.4206 76.8605 26.8974C76.6981 27.3741 76.4598 27.8403 76.1595 28.2692C75.8592 28.6981 75.5026 29.0813 75.1102 29.3971C74.7177 29.7128 74.2971 29.9548 73.8724 30.1093C73.4477 30.2639 73.0271 30.3279 72.6347 30.2978C72.2424 30.2677 71.8858 30.1439 71.5855 29.9336C71.2852 29.7233 71.0469 29.4306 70.8844 29.0722C70.7219 28.7138 70.6382 28.2967 70.6382 27.8448C70.6381 27.3928 70.7217 26.9148 70.8842 26.438C71.0467 25.9613 71.2849 25.4951 71.5853 25.0662C71.8856 24.6373 72.2422 24.254 72.6346 23.9383C73.027 23.6226 73.4476 23.3806 73.8724 23.2261C74.2971 23.0715 74.7176 23.0074 75.11 23.0376C75.5024 23.0677 75.8589 23.1915 76.1593 23.4018C76.4596 23.612 76.6978 23.9047 76.8603 24.2632C77.0229 24.6216 77.1065 25.0387 77.1065 25.4906Z" fill="white"></path></svg>
</div>
</a>
<button @click="darkMode = darkMode === 'light' ? 'dark' : 'light'" aria-label="Color theme switcher" class="relative inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md hover:bg-accent hover:text-accent-foreground h-9 w-9" type="button">
<svg class="absolute transition-all scale-100 rotate-0 dark:-rotate-90 dark:scale-0" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 685q45.456 0 77.228-31.772Q589 621.456 589 576q0-45.456-31.772-77.228Q525.456 467 480 467q-45.456 0-77.228 31.772Q371 530.544 371 576q0 45.456 31.772 77.228Q434.544 685 480 685Zm0 91q-83 0-141.5-58.5T280 576q0-83 58.5-141.5T480 376q83 0 141.5 58.5T680 576q0 83-58.5 141.5T480 776ZM80 621.5q-19.152 0-32.326-13.174T34.5 576q0-19.152 13.174-32.326T80 530.5h80q19.152 0 32.326 13.174T205.5 576q0 19.152-13.174 32.326T160 621.5H80Zm720 0q-19.152 0-32.326-13.174T754.5 576q0-19.152 13.174-32.326T800 530.5h80q19.152 0 32.326 13.174T925.5 576q0 19.152-13.174 32.326T880 621.5h-80Zm-320-320q-19.152 0-32.326-13.174T434.5 256v-80q0-19.152 13.174-32.326T480 130.5q19.152 0 32.326 13.174T525.5 176v80q0 19.152-13.174 32.326T480 301.5Zm0 720q-19.152 0-32.326-13.17Q434.5 995.152 434.5 976v-80q0-19.152 13.174-32.326T480 850.5q19.152 0 32.326 13.174T525.5 896v80q0 19.152-13.174 32.33-13.174 13.17-32.326 13.17ZM222.174 382.065l-43-42Q165.5 327.391 166 308.239t13.174-33.065q13.435-13.674 32.587-13.674t32.065 13.674l42.239 43q12.674 13.435 12.555 31.706-.12 18.272-12.555 31.946-12.674 13.674-31.445 13.413-18.772-.261-32.446-13.174Zm494 494.761-42.239-43q-12.674-13.435-12.674-32.087t12.674-31.565Q686.609 756.5 705.38 757q18.772.5 32.446 13.174l43 41.761Q794.5 824.609 794 843.761t-13.174 33.065Q767.391 890.5 748.239 890.5t-32.065-13.674Zm-42-494.761Q660.5 369.391 661 350.62q.5-18.772 13.174-32.446l41.761-43Q728.609 261.5 747.761 262t33.065 13.174q13.674 13.435 13.674 32.587t-13.674 32.065l-43 42.239q-13.435 12.674-31.706 12.555-18.272-.12-31.946-12.555Zm-495 494.761Q165.5 863.391 165.5 844.239t13.674-32.065l43-42.239q13.435-12.674 32.087-12.674t31.565 12.674Q299.5 782.609 299 801.38q-.5 18.772-13.174 32.446l-41.761 43Q231.391 890.5 212.239 890t-33.065-13.174ZM480 576Z"></path>
</svg>
<svg class="absolute transition-all scale-0 rotate-90 dark:rotate-0 dark:scale-100" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 936q-151 0-255.5-104.5T120 576q0-138 90-239.5T440 218q25-3 39 18t-1 44q-17 26-25.5 55t-8.5 61q0 90 63 153t153 63q31 0 61.5-9t54.5-25q21-14 43-1.5t19 39.5q-14 138-117.5 229T480 936Zm0-80q88 0 158-48.5T740 681q-20 5-40 8t-40 3q-123 0-209.5-86.5T364 396q0-20 3-40t8-40q-78 32-126.5 102T200 576q0 116 82 198t198 82Zm-10-270Z"></path>
</svg>
</button>
</nav>
</div>
</div>
</header>
<div class="flex-1"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10"><aside :aria-hidden="!showSidebar" :class="{ 'translate-x-0': showSidebar }" class="fixed inset-y-0 left-0 md:top-14 z-50 md:z-30 bg-background md:bg-transparent transition-all duration-100 -translate-x-full md:translate-x-0 ml-0 p-6 md:p-0 md:-ml-2 md:h-[calc(100vh-3.5rem)] w-5/6 md:w-full shrink-0 overflow-y-auto border-r border-border md:sticky" id="left-sidebar">
<a class="!justify-start text-sm md:!hidden bg-background" href="../../../index.html">
<img alt="Logo" class="mr-2 dark:invert" height="16" src="../../../_static/logo.svg" width="16"/><span class="font-bold text-clip whitespace-nowrap">AutoGen</span>
</a>
<div class="relative overflow-hidden md:overflow-auto my-4 md:my-0 h-[calc(100vh-8rem)] md:h-auto">
<div class="overflow-y-auto h-full w-full relative pr-6"><nav class="flex md:hidden flex-col font-medium mt-4">
<a href="/index.html">Docs</a>
</nav><nav class="table w-full min-w-full my-6 lg:my-8">
<ul class="current">
<li class="toctree-l1 current" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../index.html">AgentChat<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul class="current" x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l2 current" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="index.html">Tutorial<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul class="current" x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="agents.html">Agents</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Teams</a></li>
<li class="toctree-l3"><a class="reference internal" href="selector-group-chat.html">Selector Group Chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="swarm.html">Swarm</a></li>
<li class="toctree-l3"><a class="reference internal" href="termination.html">Termination</a></li>
<li class="toctree-l3"><a class="reference internal" href="termination.html#autogen-provides-several-built-in-termination-conditions">AutoGen provides several built-in termination conditions:</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom-agents.html">Custom Agents</a></li>
</ul>
</li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../examples/index.html">Examples<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../examples/travel-planning.html">Travel Planning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/company-research.html">Company Research</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/literature-review.html">Literature Review</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../core-user-guide/index.html">Core<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../core-user-guide/quickstart.html">Quick Start</a></li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../core-user-guide/core-concepts/index.html">Core Concepts<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/core-concepts/agent-and-multi-agent-application.html">Agent and Multi-Agent Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/core-concepts/architecture.html">Agent Runtime Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/core-concepts/api-layers.html">API Layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/core-concepts/application-stack.html">Application Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/core-concepts/agent-identity-and-lifecycle.html">Agent Identity and Lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/core-concepts/topic-and-subscription.html">Topic and Subscription</a></li>
</ul>
</li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../core-user-guide/framework/index.html">Framework Guide<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/agent-and-agent-runtime.html">Agent and Agent Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/message-and-communication.html">Message and Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/model-clients.html">Model Clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/tools.html">Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/logging.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/telemetry.html">Open Telemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/command-line-code-executors.html">Command Line Code Executors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/distributed-agent-runtime.html">Distributed Agent Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/framework/distributed-agent-runtime.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../core-user-guide/design-patterns/index.html">Multi-Agent Design Patterns<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/design-patterns/group-chat.html">Group Chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/design-patterns/handoffs.html">Handoffs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/design-patterns/mixture-of-agents.html">Mixture of Agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/design-patterns/multi-agent-debate.html">Multi-Agent Debate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/design-patterns/reflection.html">Reflection</a></li>
</ul>
</li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../core-user-guide/cookbook/index.html">Cookbook<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/azure-openai-with-aad-auth.html">Azure OpenAI with AAD Auth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/termination-with-intervention.html">Termination using Intervention Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/tool-use-with-intervention.html">User Approval for Tool Execution using Intervention Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/extracting-results-with-an-agent.html">Extracting Results with an Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/openai-assistant-agent.html">OpenAI Assistant Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/langgraph-agent.html">Using LangGraph-Backed Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/llamaindex-agent.html">Using LlamaIndex-Backed Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/local-llms-ollama-litellm.html">Local LLMs with LiteLLM &amp; Ollama</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/instrumenting.html">Instrumentating your code locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/topic-subscription-scenarios.html">Topic and Subscription Example Scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core-user-guide/cookbook/structured-output-agent.html">Structured output using GPT-4o models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../core-user-guide/faqs.html">FAQs</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../extensions-user-guide/index.html">Extensions<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../extensions-user-guide/azure-container-code-executor.html">ACA Dynamic Sessions Code Executor</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../packages/index.html">Packages</a></li>
</ul>
<ul>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../../reference/index.html">API Reference<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../../reference/python/autogen_agentchat/autogen_agentchat.html">autogen_agentchat<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.agents.html">autogen_agentchat.agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html">autogen_agentchat.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.logging.html">autogen_agentchat.logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html">autogen_agentchat.task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html">autogen_agentchat.teams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.messages.html">autogen_agentchat.messages</a></li>
</ul>
</li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../../reference/python/autogen_core/autogen_core.html">autogen_core<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_core/autogen_core.application.html">autogen_core.application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_core/autogen_core.base.html">autogen_core.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_core/autogen_core.components.html">autogen_core.components</a></li>
</ul>
</li>
<li class="toctree-l2" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../../reference/python/autogen_ext/autogen_ext.html">autogen_ext<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_ext/autogen_ext.agents.html">autogen_ext.agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_ext/autogen_ext.code_executors.html">autogen_ext.code_executors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_ext/autogen_ext.models.html">autogen_ext.models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/python/autogen_ext/autogen_ext.tools.html">autogen_ext.tools</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
<button @click="showSidebar = false" class="absolute md:hidden right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100" type="button">
<svg class="h-4 w-4" fill="currentColor" height="24" stroke="none" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 632 284 828q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536 576l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480 632Z"></path>
</svg>
</button>
</aside>
<main class="relative py-6 lg:gap-10 lg:py-8 xl:grid xl:grid-cols-[1fr_300px]">
<div class="w-full min-w-0 mx-auto">
<nav aria-label="breadcrumbs" class="flex items-center mb-4 space-x-1 text-sm text-muted-foreground">
<a class="overflow-hidden text-ellipsis whitespace-nowrap hover:text-foreground" href="../../../index.html">
<span class="hidden md:inline">AutoGen</span>
<svg aria-label="Home" class="md:hidden" fill="currentColor" height="18" stroke="none" viewbox="0 96 960 960" width="18" xmlns="http://www.w3.org/2000/svg">
<path d="M240 856h120V616h240v240h120V496L480 316 240 496v360Zm-80 80V456l320-240 320 240v480H520V696h-80v240H160Zm320-350Z"></path>
</svg>
</a>
<div class="mr-1">/</div><a class="hover:text-foreground overflow-hidden text-ellipsis whitespace-nowrap" href="../index.html">AgentChat</a>
<div class="mr-1">/</div><a class="hover:text-foreground overflow-hidden text-ellipsis whitespace-nowrap" href="index.html">Tutorial</a>
<div class="mr-1">/</div><span aria-current="page" class="font-medium text-foreground overflow-hidden text-ellipsis whitespace-nowrap">Teams</span>
</nav>
<div id="content" role="main">
<section id="teams">
<h1>Teams<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#teams"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>AgentChat is Work in Progress. APIs may change in future releases.</p>
</div>
<p>In AgentChat, teams define how groups of agents collaborate to address tasks.
A team is composed of one or more agents, and interacts with your application
by receiving task and returning task result.
It is stateful and maintains context across multiple tasks.
A team uses a stateful termination condition to determine when to stop processing the
current task.</p>
<p>The diagram below shows the relationship between team and your application.</p>
<p><img alt="AgentChat Teams" src="../../../_images/agentchat-team.svg"/></p>
<p>AgentChat provides several preset teams that implements one or more <a class="reference internal" href="../../core-user-guide/design-patterns/index.html"><span class="std std-doc">multi-agent design patterns</span></a> to simplify development. Here is a list of the preset teams:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.RoundRobinGroupChat" title="autogen_agentchat.teams.RoundRobinGroupChat"><code class="xref py py-class docutils literal notranslate"><span class="pre">RoundRobinGroupChat</span></code></a>: All participants share context and takes turn to respond in a round-robin fashion. We will cover this team in this section.</p></li>
<li><p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.SelectorGroupChat" title="autogen_agentchat.teams.SelectorGroupChat"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorGroupChat</span></code></a>: All participants share context and use a model-based selector (with custom override) to select the next agent to respond. See <a class="reference internal" href="selector-group-chat.html"><span class="std std-doc">Selector Group Chat</span></a> for more details.</p></li>
<li><p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.Swarm" title="autogen_agentchat.teams.Swarm"><code class="xref py py-class docutils literal notranslate"><span class="pre">Swarm</span></code></a>: All participants share context and use <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.messages.html#autogen_agentchat.messages.HandoffMessage" title="autogen_agentchat.messages.HandoffMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">HandoffMessage</span></code></a>to pass control to the next agent. See <a class="reference internal" href="swarm.html"><span class="std std-doc">Swarm</span></a> for more details.</p></li>
</ul>
<p>At a high-level, a team API consists of the following methods:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.TaskRunner.run" title="autogen_agentchat.base.TaskRunner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a>: Process a task, which can be a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" rel="nofollow noopener" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><svg fill="currentColor" height="1em" stroke="none" viewbox="0 96 960 960" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M188 868q-11-11-11-28t11-28l436-436H400q-17 0-28.5-11.5T360 336q0-17 11.5-28.5T400 296h320q17 0 28.5 11.5T760 336v320q0 17-11.5 28.5T720 696q-17 0-28.5-11.5T680 656V432L244 868q-11 11-28 11t-28-11Z"></path></svg></a>, <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.messages.html#autogen_agentchat.messages.TextMessage" title="autogen_agentchat.messages.TextMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextMessage</span></code></a>, <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.messages.html#autogen_agentchat.messages.MultiModalMessage" title="autogen_agentchat.messages.MultiModalMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiModalMessage</span></code></a>, or <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.messages.html#autogen_agentchat.messages.HandoffMessage" title="autogen_agentchat.messages.HandoffMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">HandoffMessage</span></code></a>, and returns <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.TaskResult" title="autogen_agentchat.base.TaskResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskResult</span></code></a>. The task can also be <code class="docutils literal notranslate"><span class="pre">None</span></code> to resume processing the previous task if the team has not been reset.</p></li>
<li><p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.TaskRunner.run_stream" title="autogen_agentchat.base.TaskRunner.run_stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_stream()</span></code></a>: Similar to <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.TaskRunner.run" title="autogen_agentchat.base.TaskRunner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a>, but it returns an async generator of messages and the final task result.</p></li>
<li><p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.Team.reset" title="autogen_agentchat.base.Team.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a>: To reset the team state if the next task is not related to the previous task. Otherwise, the team can utilize the context from the previous task to process the next one.</p></li>
</ul>
<p>In this section, we will be using the
<a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.RoundRobinGroupChat" title="autogen_agentchat.teams.RoundRobinGroupChat"><code class="xref py py-class docutils literal notranslate"><span class="pre">RoundRobinGroupChat</span></code></a> team to introduce the AgentChat team API.</p>
<section id="round-robin-group-chat">
<h2>Round-Robin Group Chat<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#round-robin-group-chat" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#round-robin-group-chat'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p><a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.RoundRobinGroupChat" title="autogen_agentchat.teams.RoundRobinGroupChat"><code class="xref py py-class docutils literal notranslate"><span class="pre">RoundRobinGroupChat</span></code></a> is a simple team that allows all agents to share context and take turns to respond in a round-robin fashion.
On its turn, each agent broadcasts its response to all other agents in the team, so all agents have the same context.</p>
<p>We will start by creating a team with a single <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.agents.html#autogen_agentchat.agents.AssistantAgent" title="autogen_agentchat.agents.AssistantAgent"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssistantAgent</span></code></a> agent
and <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html#autogen_agentchat.task.TextMentionTermination" title="autogen_agentchat.task.TextMentionTermination"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextMentionTermination</span></code></a>
termination condition that stops the team when a word is detected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">autogen_agentchat.agents</span> <span class="kn">import</span> <span class="n">AssistantAgent</span>
</span><span id="line-2"><span class="kn">from</span> <span class="nn">autogen_agentchat.task</span> <span class="kn">import</span> <span class="n">TextMentionTermination</span>
</span><span id="line-3"><span class="kn">from</span> <span class="nn">autogen_agentchat.teams</span> <span class="kn">import</span> <span class="n">RoundRobinGroupChat</span>
</span><span id="line-4"><span class="kn">from</span> <span class="nn">autogen_ext.models</span> <span class="kn">import</span> <span class="n">OpenAIChatCompletionClient</span>
</span><span id="line-5">
</span><span id="line-6"><span class="c1"># Create an OpenAI model client.</span>
</span><span id="line-7"><span class="n">model_client</span> <span class="o">=</span> <span class="n">OpenAIChatCompletionClient</span><span class="p">(</span>
</span><span id="line-8">    <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4o-2024-08-06"</span><span class="p">,</span>
</span><span id="line-9">    <span class="c1"># api_key="sk-...", # Optional if you have an OPENAI_API_KEY env variable set.</span>
</span><span id="line-10"><span class="p">)</span>
</span><span id="line-11">
</span><span id="line-12">
</span><span id="line-13"><span class="c1"># Define a tool that gets the weather for a city.</span>
</span><span id="line-14"><span class="k">async</span> <span class="k">def</span> <span class="nf">get_weather</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="line-15"><span class="w">    </span><span class="sd">"""Get the weather for a city."""</span>
</span><span id="line-16">    <span class="k">return</span> <span class="sa">f</span><span class="s2">"The weather in </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2"> is 72 degrees and Sunny."</span>
</span><span id="line-17">
</span><span id="line-18">
</span><span id="line-19"><span class="c1"># Create an assistant agent.</span>
</span><span id="line-20"><span class="n">weather_agent</span> <span class="o">=</span> <span class="n">AssistantAgent</span><span class="p">(</span>
</span><span id="line-21">    <span class="s2">"assistant"</span><span class="p">,</span>
</span><span id="line-22">    <span class="n">model_client</span><span class="o">=</span><span class="n">model_client</span><span class="p">,</span>
</span><span id="line-23">    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_weather</span><span class="p">],</span>
</span><span id="line-24">    <span class="n">system_message</span><span class="o">=</span><span class="s2">"Respond 'TERMINATE' when task is complete."</span><span class="p">,</span>
</span><span id="line-25"><span class="p">)</span>
</span><span id="line-26">
</span><span id="line-27"><span class="c1"># Define a termination condition.</span>
</span><span id="line-28"><span class="n">text_termination</span> <span class="o">=</span> <span class="n">TextMentionTermination</span><span class="p">(</span><span class="s2">"TERMINATE"</span><span class="p">)</span>
</span><span id="line-29">
</span><span id="line-30"><span class="c1"># Create a single-agent team.</span>
</span><span id="line-31"><span class="n">single_agent_team</span> <span class="o">=</span> <span class="n">RoundRobinGroupChat</span><span class="p">([</span><span class="n">weather_agent</span><span class="p">],</span> <span class="n">termination_condition</span><span class="o">=</span><span class="n">text_termination</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
<section id="running-team">
<h3>Running Team<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#running-team" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#running-team'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>Let’s calls the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.BaseGroupChat.run" title="autogen_agentchat.teams.BaseGroupChat.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method
to start the team with a task.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="k">async</span> <span class="k">def</span> <span class="nf">run_team</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="line-2">    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">single_agent_team</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"What is the weather in New York?"</span><span class="p">)</span>
</span><span id="line-3">    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="line-4">
</span><span id="line-5">
</span><span id="line-6"><span class="c1"># Use `asyncio.run(run_team())` when running in a script.</span>
</span><span id="line-7"><span class="k">await</span> <span class="n">run_team</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">TaskResult(messages=[TextMessage(source='user', models_usage=None, content='What is the weather in New York?'), ToolCallMessage(source='assistant', models_usage=RequestUsage(prompt_tokens=70, completion_tokens=15), content=[FunctionCall(id='call_6qWxrK1VdEVSryXKyIVpwE0h', arguments='{"city":"New York"}', name='get_weather')]), ToolCallResultMessage(source='assistant', models_usage=None, content=[FunctionExecutionResult(content='The weather in New York is 72 degrees and Sunny.', call_id='call_6qWxrK1VdEVSryXKyIVpwE0h')]), TextMessage(source='assistant', models_usage=RequestUsage(prompt_tokens=96, completion_tokens=13), content='The weather in New York is 72 degrees and sunny.'), TextMessage(source='assistant', models_usage=RequestUsage(prompt_tokens=125, completion_tokens=4), content='TERMINATE')], stop_reason="Text 'TERMINATE' mentioned")
</span></code></pre></div>
</div>
</div>
</div>
<p>The team ran the same agent until the termination condition was met.
In this case, the termination condition was met when the word “TERMINATE” is detected in the
agent’s response.
When the team stops, it returns a <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.TaskResult" title="autogen_agentchat.base.TaskResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskResult</span></code></a> object with all the messages produced by the agents in the team.</p>
</section>
<section id="reseting-team">
<h3>Reseting Team<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#reseting-team" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#reseting-team'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>You can reset the team by calling the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.BaseGroupChat.reset" title="autogen_agentchat.teams.BaseGroupChat.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a> method.
It will clear the team’s state including all of its agents’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="k">await</span> <span class="n">single_agent_team</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1"># Reset the team for the next run.</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>It is usually a good idea to reset the team if the next task is not related to the previous task.
However, if the next task is related to the previous task, you don’t need to reset.
See <a class="reference internal" href="#resuming-team">Resuming Team</a> below.</p>
</section>
<section id="streaming-team-messages">
<h3>Streaming Team Messages<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#streaming-team-messages" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#streaming-team-messages'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>Similar to agent’s <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.agents.html#autogen_agentchat.agents.BaseChatAgent.on_messages_stream" title="autogen_agentchat.agents.BaseChatAgent.on_messages_stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">on_messages_stream()</span></code></a> method,
you can stream the team’s messages by calling the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.BaseGroupChat.run_stream" title="autogen_agentchat.teams.BaseGroupChat.run_stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_stream()</span></code></a> method.
It will return a generator that yields the messages produced by the agents in the team as they are generated,
and the last item will be the task result.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">autogen_agentchat.base</span> <span class="kn">import</span> <span class="n">TaskResult</span>
</span><span id="line-2">
</span><span id="line-3">
</span><span id="line-4"><span class="k">async</span> <span class="k">def</span> <span class="nf">run_team_stream</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="line-5">    <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">single_agent_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"What is the weather in New York?"</span><span class="p">):</span>
</span><span id="line-6">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">TaskResult</span><span class="p">):</span>
</span><span id="line-7">            <span class="nb">print</span><span class="p">(</span><span class="s2">"Stop Reason:"</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">stop_reason</span><span class="p">)</span>
</span><span id="line-8">        <span class="k">else</span><span class="p">:</span>
</span><span id="line-9">            <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="line-10">
</span><span id="line-11">
</span><span id="line-12"><span class="c1"># Use `asyncio.run(run_team_stream())` when running in a script.</span>
</span><span id="line-13"><span class="k">await</span> <span class="n">run_team_stream</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">source='user' models_usage=None content='What is the weather in New York?'
</span><span id="line-2">source='assistant' models_usage=RequestUsage(prompt_tokens=70, completion_tokens=15) content=[FunctionCall(id='call_FcJlzgDmPUgGSKLjeGajFZ7V', arguments='{"city":"New York"}', name='get_weather')]
</span><span id="line-3">source='assistant' models_usage=None content=[FunctionExecutionResult(content='The weather in New York is 72 degrees and Sunny.', call_id='call_FcJlzgDmPUgGSKLjeGajFZ7V')]
</span><span id="line-4">source='assistant' models_usage=RequestUsage(prompt_tokens=96, completion_tokens=14) content='The weather in New York is currently 72 degrees and sunny.'
</span><span id="line-5">source='assistant' models_usage=RequestUsage(prompt_tokens=126, completion_tokens=4) content='TERMINATE'
</span><span id="line-6">Stop Reason: Text 'TERMINATE' mentioned
</span></code></pre></div>
</div>
</div>
</div>
<p>As the above example shows, you can obtain the reason why the team stopped by checking the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.base.html#autogen_agentchat.base.TaskResult.stop_reason" title="autogen_agentchat.base.TaskResult.stop_reason"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stop_reason</span></code></a> attribute.</p>
<p>There is a covenient method <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html#autogen_agentchat.task.Console" title="autogen_agentchat.task.Console"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Console()</span></code></a> that prints the messages to the console
with proper formatting.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">autogen_agentchat.task</span> <span class="kn">import</span> <span class="n">Console</span>
</span><span id="line-2">
</span><span id="line-3"><span class="c1"># Use `asyncio.run(single_agent_team.reset())` when running in a script.</span>
</span><span id="line-4"><span class="k">await</span> <span class="n">single_agent_team</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1"># Reset the team for the next run.</span>
</span><span id="line-5"><span class="c1"># Use `asyncio.run(single_agent_team.run_stream(task="What is the weather in Seattle?"))` when running in a script.</span>
</span><span id="line-6"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span>
</span><span id="line-7">    <span class="n">single_agent_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"What is the weather in Seattle?"</span><span class="p">)</span>
</span><span id="line-8"><span class="p">)</span>  <span class="c1"># Stream the messages to the console.</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- user ----------
</span><span id="line-2">What is the weather in Seattle?
</span><span id="line-3">---------- assistant ----------
</span><span id="line-4">[FunctionCall(id='call_QBqpeKQlczRYIlCIzKh43Kha', arguments='{"city":"Seattle"}', name='get_weather')]
</span><span id="line-5">[Prompt tokens: 69, Completion tokens: 14]
</span><span id="line-6">---------- assistant ----------
</span><span id="line-7">[FunctionExecutionResult(content='The weather in Seattle is 72 degrees and Sunny.', call_id='call_QBqpeKQlczRYIlCIzKh43Kha')]
</span><span id="line-8">---------- assistant ----------
</span><span id="line-9">The weather in Seattle is currently 72 degrees and sunny.
</span><span id="line-10">[Prompt tokens: 93, Completion tokens: 13]
</span><span id="line-11">---------- assistant ----------
</span><span id="line-12">TERMINATE
</span><span id="line-13">[Prompt tokens: 122, Completion tokens: 4]
</span><span id="line-14">---------- Summary ----------
</span><span id="line-15">Number of messages: 5
</span><span id="line-16">Finish reason: Text 'TERMINATE' mentioned
</span><span id="line-17">Total prompt tokens: 284
</span><span id="line-18">Total completion tokens: 31
</span><span id="line-19">Duration: 1.82 seconds
</span></code></pre></div>
</div>
</div>
</div>
</section>
<section id="reflection-pattern">
<h3>Reflection Pattern<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#reflection-pattern" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#reflection-pattern'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>Now we will create a team with two agents that implements the
Reflection pattern, which is a multi-agent design pattern that uses
a critic agent to evaluate the responses of a primary agent.</p>
<p>See how the reflection pattern works using the <a class="reference internal" href="../../core-user-guide/design-patterns/reflection.html"><span class="std std-doc">Core API</span></a>.</p>
<p>In this example, we will use the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.agents.html#autogen_agentchat.agents.AssistantAgent" title="autogen_agentchat.agents.AssistantAgent"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssistantAgent</span></code></a> agent class
for both the primary and critic agents.
We will use both the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html#autogen_agentchat.task.TextMentionTermination" title="autogen_agentchat.task.TextMentionTermination"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextMentionTermination</span></code></a>
and <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html#autogen_agentchat.task.MaxMessageTermination" title="autogen_agentchat.task.MaxMessageTermination"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaxMessageTermination</span></code></a> termination conditions
together to stop the team.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">autogen_agentchat.agents</span> <span class="kn">import</span> <span class="n">AssistantAgent</span>
</span><span id="line-2"><span class="kn">from</span> <span class="nn">autogen_agentchat.task</span> <span class="kn">import</span> <span class="n">Console</span><span class="p">,</span> <span class="n">MaxMessageTermination</span><span class="p">,</span> <span class="n">TextMentionTermination</span>
</span><span id="line-3"><span class="kn">from</span> <span class="nn">autogen_agentchat.teams</span> <span class="kn">import</span> <span class="n">RoundRobinGroupChat</span>
</span><span id="line-4"><span class="kn">from</span> <span class="nn">autogen_ext.models</span> <span class="kn">import</span> <span class="n">OpenAIChatCompletionClient</span>
</span><span id="line-5">
</span><span id="line-6"><span class="c1"># Create an OpenAI model client.</span>
</span><span id="line-7"><span class="n">model_client</span> <span class="o">=</span> <span class="n">OpenAIChatCompletionClient</span><span class="p">(</span>
</span><span id="line-8">    <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4o-2024-08-06"</span><span class="p">,</span>
</span><span id="line-9">    <span class="c1"># api_key="sk-...", # Optional if you have an OPENAI_API_KEY env variable set.</span>
</span><span id="line-10"><span class="p">)</span>
</span><span id="line-11">
</span><span id="line-12"><span class="c1"># Create the primary agent.</span>
</span><span id="line-13"><span class="n">primary_agent</span> <span class="o">=</span> <span class="n">AssistantAgent</span><span class="p">(</span>
</span><span id="line-14">    <span class="s2">"primary"</span><span class="p">,</span>
</span><span id="line-15">    <span class="n">model_client</span><span class="o">=</span><span class="n">model_client</span><span class="p">,</span>
</span><span id="line-16">    <span class="n">system_message</span><span class="o">=</span><span class="s2">"You are a helpful AI assistant."</span><span class="p">,</span>
</span><span id="line-17"><span class="p">)</span>
</span><span id="line-18">
</span><span id="line-19"><span class="c1"># Create the critic agent.</span>
</span><span id="line-20"><span class="n">critic_agent</span> <span class="o">=</span> <span class="n">AssistantAgent</span><span class="p">(</span>
</span><span id="line-21">    <span class="s2">"critic"</span><span class="p">,</span>
</span><span id="line-22">    <span class="n">model_client</span><span class="o">=</span><span class="n">model_client</span><span class="p">,</span>
</span><span id="line-23">    <span class="n">system_message</span><span class="o">=</span><span class="s2">"Provide constructive feedback. Respond with 'APPROVE' to when your feedbacks are addressed."</span><span class="p">,</span>
</span><span id="line-24"><span class="p">)</span>
</span><span id="line-25">
</span><span id="line-26"><span class="c1"># Define a termination condition that stops the task if the critic approves.</span>
</span><span id="line-27"><span class="n">text_termination</span> <span class="o">=</span> <span class="n">TextMentionTermination</span><span class="p">(</span><span class="s2">"APPROVE"</span><span class="p">)</span>
</span><span id="line-28"><span class="c1"># Define a termination condition that stops the task after 5 messages.</span>
</span><span id="line-29"><span class="n">max_message_termination</span> <span class="o">=</span> <span class="n">MaxMessageTermination</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span id="line-30"><span class="c1"># Combine the termination conditions using the `|`` operator so that the</span>
</span><span id="line-31"><span class="c1"># task stops when either condition is met.</span>
</span><span id="line-32"><span class="n">termination</span> <span class="o">=</span> <span class="n">text_termination</span> <span class="o">|</span> <span class="n">max_message_termination</span>
</span><span id="line-33">
</span><span id="line-34"><span class="c1"># Create a team with the primary and critic agents.</span>
</span><span id="line-35"><span class="n">reflection_team</span> <span class="o">=</span> <span class="n">RoundRobinGroupChat</span><span class="p">([</span><span class="n">primary_agent</span><span class="p">,</span> <span class="n">critic_agent</span><span class="p">],</span> <span class="n">termination_condition</span><span class="o">=</span><span class="n">termination</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Let’s give a poem-writing task to the team and see how the agents interact with each other.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># Use `asyncio.run(Console(reflection_team.run_stream(task="Write a short poem about fall season.")))` when running in a script.</span>
</span><span id="line-2"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span>
</span><span id="line-3">    <span class="n">reflection_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"Write a short poem about fall season."</span><span class="p">)</span>
</span><span id="line-4"><span class="p">)</span>  <span class="c1"># Stream the messages to the console.</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- user ----------
</span><span id="line-2">Write a short poem about fall season.
</span><span id="line-3">---------- primary ----------
</span><span id="line-4">Golden leaves dance on the breeze,  
</span><span id="line-5">Whispering secrets through the trees.  
</span><span id="line-6">Crisp air nips at cheeks so bright,  
</span><span id="line-7">As daylight fades to early night.  
</span><span id="line-8">
</span><span id="line-9">Pumpkins sit on porches grand,  
</span><span id="line-10">In a painted, harvest land.  
</span><span id="line-11">Sweaters hug us, warm and snug,  
</span><span id="line-12">While cider fills each steamy mug.  
</span><span id="line-13">
</span><span id="line-14">In this season's gentle sway,  
</span><span id="line-15">Nature tells of time's ballet.  
</span><span id="line-16">With each leaf's descent and flight,  
</span><span id="line-17">Autumn sings its soft goodnight.  
</span><span id="line-18">[Prompt tokens: 27, Completion tokens: 107]
</span><span id="line-19">---------- critic ----------
</span><span id="line-20">Your poem is beautiful and elegantly captures the essence of the fall season. The imagery you used creates vivid pictures of autumn landscapes and activities, making it easy for the reader to visualize the scene. The rhyming and rhythm contribute to the poem's musicality, enhancing its appeal. Each stanza highlights different aspects of fall, creating a well-rounded depiction of the season.
</span><span id="line-21">
</span><span id="line-22">To make the poem even more evocative, consider including a few additional sensory details or emotions tied to the season. For instance, you might evoke the sounds of rustling leaves or the feeling of warmth from a fireplace. Overall, it's a delightful and charming poem that effectively conveys the spirit of fall.
</span><span id="line-23">
</span><span id="line-24">If these suggestions are considered, please share the revised poem for additional feedback!
</span><span id="line-25">[Prompt tokens: 152, Completion tokens: 148]
</span><span id="line-26">---------- primary ----------
</span><span id="line-27">Thank you for the thoughtful feedback! Here's a revised version of the poem, incorporating more sensory details and emotions:
</span><span id="line-28">
</span><span id="line-29">---
</span><span id="line-30">
</span><span id="line-31">Golden leaves dance on the breeze,  
</span><span id="line-32">Whispering secrets through the trees.  
</span><span id="line-33">Crisp air kisses cheeks aglow,  
</span><span id="line-34">As twilight casts a gentle show.  
</span><span id="line-35">
</span><span id="line-36">Pumpkins guard each porch with pride,  
</span><span id="line-37">In this painted, harvest tide.  
</span><span id="line-38">Sweaters hug us, warm and snug,  
</span><span id="line-39">While cider steams in every mug.  
</span><span id="line-40">
</span><span id="line-41">Children laugh in rustling leaves,  
</span><span id="line-42">As branches weave autumnal eaves.  
</span><span id="line-43">Fireplaces crackle, whisper warmth,  
</span><span id="line-44">Embracing hearts in homey charms.  
</span><span id="line-45">
</span><span id="line-46">In this season's tender sway,  
</span><span id="line-47">Nature turns in grand ballet.  
</span><span id="line-48">With each leaf's descent and flight,  
</span><span id="line-49">Autumn sings its soft goodnight.  
</span><span id="line-50">
</span><span id="line-51">---
</span><span id="line-52">
</span><span id="line-53">I hope this version resonates even more deeply with the spirit of fall.
</span><span id="line-54">[Prompt tokens: 294, Completion tokens: 178]
</span><span id="line-55">---------- critic ----------
</span><span id="line-56">Your revised poem beautifully captures the essence of the fall season with delightful sensory details and emotions. The inclusion of words like "twilight casts a gentle show," "children laugh in rustling leaves," and "fireplaces crackle" adds depth and paints a vivid picture of autumn scenes. The addition of emotions, particularly the "embracing hearts in homey charms," evokes a sense of warmth and comfort associated with this season.
</span><span id="line-57">
</span><span id="line-58">The poem flows smoothly with its rhythmic quality and maintains a harmonious balance in its description of autumn. Overall, it now provides an even richer and more immersive experience for the reader. Excellent work on enhancing the sensory experience—this version resonates wonderfully with the spirit of fall. 
</span><span id="line-59">
</span><span id="line-60">APPROVE
</span><span id="line-61">[Prompt tokens: 490, Completion tokens: 142]
</span><span id="line-62">---------- Summary ----------
</span><span id="line-63">Number of messages: 5
</span><span id="line-64">Finish reason: Text 'APPROVE' mentioned, Maximum number of messages 5 reached, current message count: 5
</span><span id="line-65">Total prompt tokens: 963
</span><span id="line-66">Total completion tokens: 575
</span><span id="line-67">Duration: 8.10 seconds
</span></code></pre></div>
</div>
</div>
</div>
</section>
<section id="resuming-team">
<h3>Resuming Team<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#resuming-team" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#resuming-team'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>Let’s run the team again with a new task while keeping the context about the previous task.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># Write the poem in Chinese Tang poetry style.</span>
</span><span id="line-2"><span class="c1"># Use `asyncio.run(Console(reflection_team.run_stream(task="将这首诗用中文唐诗风格写一遍。")))` when running in a script.</span>
</span><span id="line-3"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span><span class="n">reflection_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"将这首诗用中文唐诗风格写一遍。"</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- user ----------
</span><span id="line-2">将这首诗用中文唐诗风格写一遍。
</span><span id="line-3">---------- primary ----------
</span><span id="line-4">金叶飘舞随风起，  
</span><span id="line-5">林间低语秋声细。  
</span><span id="line-6">凉风轻拂面颊红，  
</span><span id="line-7">夕光渐隐天色丽。  
</span><span id="line-8">
</span><span id="line-9">南瓜门前静自笑，  
</span><span id="line-10">丰收景色绘秋貌。  
</span><span id="line-11">暖衣贴身享温柔，  
</span><span id="line-12">热饮氤氲杯中绕。  
</span><span id="line-13">
</span><span id="line-14">童声笑逐落叶中，  
</span><span id="line-15">枝叶缀出秋帷浓。  
</span><span id="line-16">炉火轻鸣诉温情，  
</span><span id="line-17">温馨满怀思乡容。  
</span><span id="line-18">
</span><span id="line-19">此时佳季自徘徊，  
</span><span id="line-20">秋之舞步若梦来。  
</span><span id="line-21">片片叶落随风去，  
</span><span id="line-22">秋声袅袅道安睡。  
</span><span id="line-23">[Prompt tokens: 664, Completion tokens: 155]
</span><span id="line-24">---------- critic ----------
</span><span id="line-25">这首诗成功地以唐诗的风格捕捉了秋天的精髓，以古雅的语言和流畅的节奏展示了秋日的美丽。你运用了优美的意象，如“金叶飘舞”和“夕光渐隐”，将秋季的景色描绘得栩栩如生。词句简炼而意境深远，充满了诗意。
</span><span id="line-26">
</span><span id="line-27">同时，诗中融入的情感，如“温馨满怀思乡容”以及“炉火轻鸣诉温情”，有效传达了秋天的暖意与思乡之情，令人感到温暖和亲切。
</span><span id="line-28">
</span><span id="line-29">整体而言，这是一首极具唐诗魅力的作品，成功地展现了秋天的许多层面，并引发读者的共鸣。恭喜你完成了这次优雅的改编！
</span><span id="line-30">
</span><span id="line-31">APPROVE
</span><span id="line-32">[Prompt tokens: 837, Completion tokens: 199]
</span><span id="line-33">---------- Summary ----------
</span><span id="line-34">Number of messages: 3
</span><span id="line-35">Finish reason: Text 'APPROVE' mentioned
</span><span id="line-36">Total prompt tokens: 1501
</span><span id="line-37">Total completion tokens: 354
</span><span id="line-38">Duration: 4.44 seconds
</span></code></pre></div>
</div>
</div>
</div>
<p>Resume with another task.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># Write the poem in Spanish.</span>
</span><span id="line-2"><span class="c1"># Use `asyncio.run(Console(reflection_team.run_stream(task="Write the poem in Spanish.")))` when running in a script.</span>
</span><span id="line-3"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span><span class="n">reflection_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"Write the poem in Spanish."</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- user ----------
</span><span id="line-2">Write the poem in Spanish.
</span><span id="line-3">---------- primary ----------
</span><span id="line-4">Certainly! Here's a translation of the poem into Spanish:
</span><span id="line-5">
</span><span id="line-6">---
</span><span id="line-7">
</span><span id="line-8">Hojas doradas bailan en la brisa,  
</span><span id="line-9">Susurran secretos en la arboleda.  
</span><span id="line-10">El aire fresco besa las mejillas,  
</span><span id="line-11">Mientras el crepúsculo se despide a su manera.  
</span><span id="line-12">
</span><span id="line-13">Calabazas vigilan cada entrada,  
</span><span id="line-14">En esta tierra de cosecha pintada.  
</span><span id="line-15">Los suéteres nos abrazan calurosos,  
</span><span id="line-16">Mientras el vapor sube de cada taza amorosa.  
</span><span id="line-17">
</span><span id="line-18">Risas de niños suenan en hojas caídas,  
</span><span id="line-19">Mientras ramas tejen toldos de caricias.  
</span><span id="line-20">Las chimeneas crepitan, susurran calor,  
</span><span id="line-21">Abrazando los corazones con su amor hogareño.  
</span><span id="line-22">
</span><span id="line-23">En la danza de esta estación serena,  
</span><span id="line-24">La naturaleza gira con su escena.  
</span><span id="line-25">Con cada hoja que desciende en el viento,  
</span><span id="line-26">El otoño canta su suave cuento.  
</span><span id="line-27">
</span><span id="line-28">---
</span><span id="line-29">
</span><span id="line-30">Espero que esta traducción refleje el mismo espíritu y encantamiento del poema original.
</span><span id="line-31">[Prompt tokens: 1719, Completion tokens: 209]
</span><span id="line-32">---------- critic ----------
</span><span id="line-33">Your translation of the poem into Spanish beautifully captures the essence and lyrical quality of the original. The imagery and emotions are conveyed effectively, maintaining the warmth and serene atmosphere of fall that the poem embodies. Each stanza mirrors the themes presented in the English version, like the golden leaves, harvest, and cozy reflections of autumn.
</span><span id="line-34">
</span><span id="line-35">Overall, your translation is both poetic and faithful to the original content. If you have further adjustments or specific stylistic preferences, feel free to share. Great job on this translation!
</span><span id="line-36">
</span><span id="line-37">APPROVE
</span><span id="line-38">[Prompt tokens: 1946, Completion tokens: 102]
</span><span id="line-39">---------- Summary ----------
</span><span id="line-40">Number of messages: 3
</span><span id="line-41">Finish reason: Text 'APPROVE' mentioned
</span><span id="line-42">Total prompt tokens: 3665
</span><span id="line-43">Total completion tokens: 311
</span><span id="line-44">Duration: 4.22 seconds
</span></code></pre></div>
</div>
</div>
</div>
</section>
<section id="resuming-a-previous-task">
<h3>Resuming A Previous Task<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#resuming-a-previous-task" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#resuming-a-previous-task'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>We can call <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.BaseGroupChat.run" title="autogen_agentchat.teams.BaseGroupChat.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> or <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.BaseGroupChat.run_stream" title="autogen_agentchat.teams.BaseGroupChat.run_stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_stream()</span></code></a> methods
without setting the <code class="docutils literal notranslate"><span class="pre">task</span></code> again to resume the previous task. The team will continue from where it left off.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># Use the `asyncio.run(Console(reflection_team.run_stream()))` when running in a script.</span>
</span><span id="line-2"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span><span class="n">reflection_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">())</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- primary ----------
</span><span id="line-2">Thank you for your kind words! I'm glad the translation captures the essence and lyrical quality of the original poem. If you have any more requests or need further assistance, please feel free to let me know. I'm here to help!
</span><span id="line-3">[Prompt tokens: 2042, Completion tokens: 46]
</span><span id="line-4">---------- critic ----------
</span><span id="line-5">You're very welcome! I'm glad to hear that you're satisfied with the translation. If you have any more requests, whether it's poetry, translation, or any other kind of assistance, don't hesitate to reach out. I'm here to help with whatever you need. Enjoy the rest of your creative journey!
</span><span id="line-6">[Prompt tokens: 2106, Completion tokens: 58]
</span><span id="line-7">---------- primary ----------
</span><span id="line-8">Thank you for your encouraging words! I'm here to assist you with any other requests you might have, whether related to creativity, translation, or any other topic. Feel free to reach out whenever you need help or inspiration. Enjoy your journey in creativity!
</span><span id="line-9">[Prompt tokens: 2158, Completion tokens: 50]
</span><span id="line-10">---------- critic ----------
</span><span id="line-11">You're welcome! It's always a pleasure to assist you. If you ever have more questions or need inspiration, don't hesitate to reach out. Happy creating, and enjoy every moment of your creative journey!
</span><span id="line-12">[Prompt tokens: 2226, Completion tokens: 39]
</span><span id="line-13">---------- primary ----------
</span><span id="line-14">Thank you so much! Your encouragement is greatly appreciated. Feel free to reach out at any time for assistance or inspiration. I wish you the best on your creative journey and hope you enjoy every step of the way!
</span><span id="line-15">[Prompt tokens: 2259, Completion tokens: 43]
</span><span id="line-16">---------- Summary ----------
</span><span id="line-17">Number of messages: 5
</span><span id="line-18">Finish reason: Maximum number of messages 5 reached, current message count: 5
</span><span id="line-19">Total prompt tokens: 10791
</span><span id="line-20">Total completion tokens: 236
</span><span id="line-21">Duration: 5.00 seconds
</span></code></pre></div>
</div>
</div>
</div>
</section>
<section id="pause-for-user-input">
<h3>Pause for User Input<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#pause-for-user-input" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#pause-for-user-input'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>Often times, team needs additional input from the application (i.e., user)
to continue processing the task. We will show two possible ways to do it:</p>
<ul class="simple">
<li><p>Set the maximum number of turns such that the team stops after the specified number of turns.</p></li>
<li><p>Use the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html#autogen_agentchat.task.HandoffTermination" title="autogen_agentchat.task.HandoffTermination"><code class="xref py py-class docutils literal notranslate"><span class="pre">HandoffTermination</span></code></a> termination condition.</p></li>
</ul>
<p>You can also use custom termination conditions, see <a class="reference internal" href="termination.html"><span class="std std-doc">Termination Conditions</span></a>.</p>
<section id="maximum-number-of-turns">
<h4>Maximum Number of Turns<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#maximum-number-of-turns"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h4>
<p>This is the simplest way to pause the team for user input. For example,
you can set the maximum number of turns to 1 such that the team stops right
after the first agent responds. This is useful when you want the user
to constantly engage with the team, such as in a chatbot scenario.</p>
<p>Simply set the <code class="docutils literal notranslate"><span class="pre">max_turns</span></code> parameter in the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.RoundRobinGroupChat" title="autogen_agentchat.teams.RoundRobinGroupChat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RoundRobinGroupChat()</span></code></a> constructor.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="n">team</span> <span class="o">=</span> <span class="n">RoundRobinGroupChat</span><span class="p">([</span><span class="o">...</span><span class="p">],</span> <span class="n">max_turns</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>Once the team stops, the turn count will be reset. When you resume the team,
it will start from 0 again.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">max_turn</span></code> is specific to the team class and is currently only supported by
<a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.RoundRobinGroupChat" title="autogen_agentchat.teams.RoundRobinGroupChat"><code class="xref py py-class docutils literal notranslate"><span class="pre">RoundRobinGroupChat</span></code></a>, <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.SelectorGroupChat" title="autogen_agentchat.teams.SelectorGroupChat"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorGroupChat</span></code></a>, and <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.teams.html#autogen_agentchat.teams.Swarm" title="autogen_agentchat.teams.Swarm"><code class="xref py py-class docutils literal notranslate"><span class="pre">Swarm</span></code></a>.
When used with termination conditions, the team will stop when either condition is met.</p>
</section>
<section id="using-handoff-to-pause-team">
<h4>Using Handoff to Pause Team<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#using-handoff-to-pause-team"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h4>
<p>You can use the <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.task.html#autogen_agentchat.task.HandoffTermination" title="autogen_agentchat.task.HandoffTermination"><code class="xref py py-class docutils literal notranslate"><span class="pre">HandoffTermination</span></code></a> termination condition
to stop the team when an agent sends a <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.messages.html#autogen_agentchat.messages.HandoffMessage" title="autogen_agentchat.messages.HandoffMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">HandoffMessage</span></code></a> message.</p>
<p>Let’s create a team with a single <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.agents.html#autogen_agentchat.agents.AssistantAgent" title="autogen_agentchat.agents.AssistantAgent"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssistantAgent</span></code></a> agent
with a handoff setting.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The model used with <a class="reference internal" href="../../../reference/python/autogen_agentchat/autogen_agentchat.agents.html#autogen_agentchat.agents.AssistantAgent" title="autogen_agentchat.agents.AssistantAgent"><code class="xref py py-class docutils literal notranslate"><span class="pre">AssistantAgent</span></code></a>must support tool call
to use the handoff feature.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">autogen_agentchat.agents</span> <span class="kn">import</span> <span class="n">AssistantAgent</span><span class="p">,</span> <span class="n">Handoff</span>
</span><span id="line-2"><span class="kn">from</span> <span class="nn">autogen_agentchat.task</span> <span class="kn">import</span> <span class="n">HandoffTermination</span><span class="p">,</span> <span class="n">TextMentionTermination</span>
</span><span id="line-3"><span class="kn">from</span> <span class="nn">autogen_agentchat.teams</span> <span class="kn">import</span> <span class="n">RoundRobinGroupChat</span>
</span><span id="line-4"><span class="kn">from</span> <span class="nn">autogen_ext.models</span> <span class="kn">import</span> <span class="n">OpenAIChatCompletionClient</span>
</span><span id="line-5">
</span><span id="line-6"><span class="c1"># Create an OpenAI model client.</span>
</span><span id="line-7"><span class="n">model_client</span> <span class="o">=</span> <span class="n">OpenAIChatCompletionClient</span><span class="p">(</span>
</span><span id="line-8">    <span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4o-2024-08-06"</span><span class="p">,</span>
</span><span id="line-9">    <span class="c1"># api_key="sk-...", # Optional if you have an OPENAI_API_KEY env variable set.</span>
</span><span id="line-10"><span class="p">)</span>
</span><span id="line-11">
</span><span id="line-12"><span class="c1"># Create a lazy assistant agent that always hands off to the user.</span>
</span><span id="line-13"><span class="n">lazy_agent</span> <span class="o">=</span> <span class="n">AssistantAgent</span><span class="p">(</span>
</span><span id="line-14">    <span class="s2">"lazy_assistant"</span><span class="p">,</span>
</span><span id="line-15">    <span class="n">model_client</span><span class="o">=</span><span class="n">model_client</span><span class="p">,</span>
</span><span id="line-16">    <span class="n">handoffs</span><span class="o">=</span><span class="p">[</span><span class="n">Handoff</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">"user"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">"Transfer to user."</span><span class="p">)],</span>
</span><span id="line-17">    <span class="n">system_message</span><span class="o">=</span><span class="s2">"Always transfer to user when you don't know the answer. Respond 'TERMINATE' when task is complete."</span><span class="p">,</span>
</span><span id="line-18"><span class="p">)</span>
</span><span id="line-19">
</span><span id="line-20"><span class="c1"># Define a termination condition that checks for handoff message targetting helper and text "TERMINATE".</span>
</span><span id="line-21"><span class="n">handoff_termination</span> <span class="o">=</span> <span class="n">HandoffTermination</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="s2">"user"</span><span class="p">)</span>
</span><span id="line-22"><span class="n">text_termination</span> <span class="o">=</span> <span class="n">TextMentionTermination</span><span class="p">(</span><span class="s2">"TERMINATE"</span><span class="p">)</span>
</span><span id="line-23"><span class="n">termination</span> <span class="o">=</span> <span class="n">handoff_termination</span> <span class="o">|</span> <span class="n">text_termination</span>
</span><span id="line-24">
</span><span id="line-25"><span class="c1"># Create a single-agent team.</span>
</span><span id="line-26"><span class="n">lazy_agent_team</span> <span class="o">=</span> <span class="n">RoundRobinGroupChat</span><span class="p">([</span><span class="n">lazy_agent</span><span class="p">],</span> <span class="n">termination_condition</span><span class="o">=</span><span class="n">termination</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Let’s run the team with a task that requires additional input from the user
because the agent doesn’t have relevant tools to continue processing the task.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kn">from</span> <span class="nn">autogen_agentchat.task</span> <span class="kn">import</span> <span class="n">Console</span>
</span><span id="line-2">
</span><span id="line-3"><span class="c1"># Use `asyncio.run(Console(lazy_agent_team.run_stream(task="What is the weather in New York?")))` when running in a script.</span>
</span><span id="line-4"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span><span class="n">lazy_agent_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"What is the weather in New York?"</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- user ----------
</span><span id="line-2">What is the weather in New York?
</span><span id="line-3">---------- lazy_assistant ----------
</span><span id="line-4">[FunctionCall(id='call_YHm4KPjFIWZE95YrJWlJwcv4', arguments='{}', name='transfer_to_user')]
</span><span id="line-5">[Prompt tokens: 68, Completion tokens: 11]
</span><span id="line-6">---------- lazy_assistant ----------
</span><span id="line-7">[FunctionExecutionResult(content='Transfer to user.', call_id='call_YHm4KPjFIWZE95YrJWlJwcv4')]
</span><span id="line-8">---------- lazy_assistant ----------
</span><span id="line-9">Transfer to user.
</span><span id="line-10">---------- Summary ----------
</span><span id="line-11">Number of messages: 4
</span><span id="line-12">Finish reason: Handoff to user from lazy_assistant detected.
</span><span id="line-13">Total prompt tokens: 68
</span><span id="line-14">Total completion tokens: 11
</span><span id="line-15">Duration: 0.73 seconds
</span></code></pre></div>
</div>
</div>
</div>
<p>You can see the team stopped due to the handoff message was detected.
Let’s continue the team by providing the information the agent needs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="c1"># Use `asyncio.run(Console(lazy_agent_team.run_stream(task="It is raining in New York.")))` when running in a script.</span>
</span><span id="line-2"><span class="k">await</span> <span class="n">Console</span><span class="p">(</span><span class="n">lazy_agent_team</span><span class="o">.</span><span class="n">run_stream</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s2">"It is raining in New York."</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><code><span id="line-1">---------- user ----------
</span><span id="line-2">It is raining in New York.
</span><span id="line-3">---------- lazy_assistant ----------
</span><span id="line-4">I hope you stay dry! Is there anything else you would like to know or do?
</span><span id="line-5">[Prompt tokens: 108, Completion tokens: 19]
</span><span id="line-6">---------- lazy_assistant ----------
</span><span id="line-7">TERMINATE
</span><span id="line-8">[Prompt tokens: 134, Completion tokens: 4]
</span><span id="line-9">---------- Summary ----------
</span><span id="line-10">Number of messages: 3
</span><span id="line-11">Finish reason: Text 'TERMINATE' mentioned
</span><span id="line-12">Total prompt tokens: 242
</span><span id="line-13">Total completion tokens: 23
</span><span id="line-14">Duration: 6.77 seconds
</span></code></pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
</section>
</div></div><aside class="hidden text-sm xl:block" id="right-sidebar">
<div class="sticky top-16 -mt-10 max-h-[calc(100vh-5rem)] overflow-y-auto pt-6 space-y-2"><p class="font-medium">On this page</p>
<ul>
<li><a :data-current="activeSection === '#round-robin-group-chat'" class="reference internal" href="#round-robin-group-chat">Round-Robin Group Chat</a><ul>
<li><a :data-current="activeSection === '#running-team'" class="reference internal" href="#running-team">Running Team</a></li>
<li><a :data-current="activeSection === '#reseting-team'" class="reference internal" href="#reseting-team">Reseting Team</a></li>
<li><a :data-current="activeSection === '#streaming-team-messages'" class="reference internal" href="#streaming-team-messages">Streaming Team Messages</a></li>
<li><a :data-current="activeSection === '#reflection-pattern'" class="reference internal" href="#reflection-pattern">Reflection Pattern</a></li>
<li><a :data-current="activeSection === '#resuming-team'" class="reference internal" href="#resuming-team">Resuming Team</a></li>
<li><a :data-current="activeSection === '#resuming-a-previous-task'" class="reference internal" href="#resuming-a-previous-task">Resuming A Previous Task</a></li>
<li><a :data-current="activeSection === '#pause-for-user-input'" class="reference internal" href="#pause-for-user-input">Pause for User Input</a><ul>
<li><a :data-current="activeSection === '#maximum-number-of-turns'" class="reference internal" href="#maximum-number-of-turns">Maximum Number of Turns</a></li>
<li><a :data-current="activeSection === '#using-handoff-to-pause-team'" class="reference internal" href="#using-handoff-to-pause-team">Using Handoff to Pause Team</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="show-on-github">
<a :data-current="activeSection === 'https://github.com/microsoft/autogen/blob/main/python/packages/autogen-core/docs/src/user-guide/agentchat-user-guide/tutorial/teams.ipynb'" class="text-sm leading-loose text-muted-foreground" href="https://github.com/microsoft/autogen/blob/main/python/packages/autogen-core/docs/src/user-guide/agentchat-user-guide/tutorial/teams.ipynb">
<span class="fa-brands fa-github"></span> Show on GitHub
            </a>
</div>
</div>
</aside>
</main>
</div>
</div><footer class="py-6 border-t border-border md:py-0">
<div class="container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row">
<div class="flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0">
<p class="text-sm leading-loose text-center text-muted-foreground md:text-left">© 2024, Microsoft . Built with <a class="font-medium underline underline-offset-4" href="https://www.sphinx-doc.org" rel="noreferrer">Sphinx 8.1.3</a><ul class="list-unstyled text-sm leading-loose text-right text-muted-foreground md:text-right">
<li>  |  <a class="underline underline-offset-4" href="https://go.microsoft.com/fwlink/?LinkId=521839">Privacy Policy</a> | <a class="underline underline-offset-4" href="https://go.microsoft.com/fwlink/?linkid=2259814">Consumer Health Privacy</a> </li>
</ul></p>
</div>
</div>
</footer>
</div>
<script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
<script src="../../../_static/doctools.js?v=9bcbadda"></script>
<script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
<script defer="defer" src="../../../_static/theme.js?v=073f68d9"></script>
<script src="../../../_static/design-tabs.js?v=f930bc37"></script>
<script></script>
</body>
</html>